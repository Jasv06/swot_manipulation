<root BTCPP_format="4">

    <BehaviorTree ID="BehaviorTree">
        <RetryUntilSuccessful num_attempts="7">
            <Fallback name="tree">
                <Sequence name="Pick">
                    <Action ID="MoveToScan"/>
                    <Action ID="ScanWorkSpace"/>
                    <SubTree ID="PickFromWS"/>
                </Sequence>
                <Sequence name="Place">
                    <Action ID="CheckObjRequired"/>
                    <SubTree ID="PlaceInWS"/>
                </Sequence>
                <Action ID="MoveToDrivePose"/>
            </Fallback>
        </RetryUntilSuccessful>
    </BehaviorTree>

    <BehaviorTree ID="PickFromWS">
        <RetryUntilSuccessful num_attempts="3">
            <Fallback name="subtree1">
                <Action ID="GetGraspAndMoveGrasp"/>
                <Action ID="PickPlaceObject"/>
                <Action ID="MoveUp"/>
                <Action ID="DropObjectInTray"/>
                <Action ID="MoveHomePos"/>
            </Fallback>
        </RetryUntilSuccessful>
    </BehaviorTree>
    
    <BehaviorTree ID="PlaceInWS">
        <RetryUntilSuccessful num_attempts="3">
            <Fallback name="subtree2">
                <Action ID="CheckWSFree"/>
                <Action ID="MoveToTray"/>
                <Action ID="PickFromTray"/>
                <Action ID="MoveToDropPos"/>
                <Action ID="GetGraspAndMoveGrasp"/>
                <Action ID="PickPlaceObject"/>
                <Action ID="MoveHomePos"/>
            </Fallback>
        </RetryUntilSuccessful>
    </BehaviorTree>
    
    <TreeNodesModel>
        <Action ID="CheckObjRequired"/>
        <Action ID="CheckWSFree"/>
        <Action ID="DropObjectInTray"/>
        <Action ID="GetGraspAndMoveGrasp"/>
        <Action ID="MoveHomePos"/>
        <Action ID="MoveToDrivePose"/>
        <Action ID="MoveToDropPos"/>
        <Action ID="MoveToScan"/>
        <Action ID="MoveToTray"/>
        <Action ID="MoveUp"/>
        <Action ID="PickFromTray"/>
        <Action ID="PickPlaceObject"/>
        <Action ID="ScanWorkSpace"/>
        <SubTree ID="PickFromWS"/>
        <SubTree ID="PlaceInWS"/>
    </TreeNodesModel>
</root>
